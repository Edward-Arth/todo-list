(()=>{"use strict";const e=document.getElementById("taskForm"),t=[],l=(e,t,l,n)=>({title:e,description:t,dueDate:l,priority:n});function n(e,l){let n=document.createElement("div");l.appendChild(n),n.id="taskBox";let a=e.title.toString().replace(/\s/g,"-");n.classList.add(a);let i=document.createElement("button");n.appendChild(i),i.id="completeButton",i.addEventListener("click",(()=>{""===i.textContent?(n.style.backgroundColor="#4FFFB0",i.textContent="âœ“"):(n.style.backgroundColor="",i.textContent="")}));let o=document.createElement("div");o.id="taskBoxTitle",n.appendChild(o),o.textContent=e.title;let c=document.createElement("div");c.id="taskBoxDueDate",n.appendChild(c),c.textContent=e.dueDate;let r=document.createElement("div");r.id="taskBoxPriority",n.appendChild(r),r.textContent=e.priority,function(e){let l=document.createElement("div");n.appendChild(l),l.id="taskBubble",l.style.display="none",l.classList.add(a);let s=l.parentElement,d=s.querySelector("#taskBoxTitle"),i=s.querySelector("#taskBoxDueDate"),o=s.querySelector("#taskBoxPriority"),c=document.createElement("input");c.id="taskBubbleTitle",c.type="text",l.appendChild(c),c.value=d.textContent;let r=document.createElement("textarea");r.id="taskBubbleDescription",l.appendChild(r),r.cols="50",r.rows="20",r.value=e.description;let u=document.createElement("input");u.id="taskBubbleDueDate",u.type="date",l.appendChild(u),u.value=i.textContent;let p=document.createElement("select");p.id="taskBubblePriority",l.appendChild(p);let m=document.createElement("option");m.text="High",p.appendChild(m);let y=document.createElement("option");y.text="Normal",p.appendChild(y);let g=document.createElement("option");g.text="Low",p.appendChild(g),p.value=o.textContent;let C=document.createElement("button");C.id="taskBubbleDone",l.appendChild(C),C.textContent="Finish",C.addEventListener("click",(()=>{if(""===c.value||c.value.match(/^\s|\s$/)||""===r.value)alert("Enter task details");else{d.textContent=c.value,i.textContent=u.value,o.textContent=p.value;let e=s.className.replace(/-/g," "),n=t.findIndex((t=>t.title===e));t[n].title=c.value,t[n].description=r.value,t[n].dueDate=u.value,t[n].priority=p.value,localStorage.setItem("taskArray",JSON.stringify(t)),l.style.display="none"}}))}(e);let u=n.querySelector("#taskBubble"),p=document.createElement("div");p.id="taskButtonz",n.appendChild(p);let m=document.createElement("button");p.appendChild(m),m.classList.add("taskButtonsYo"),m.textContent="View",m.id="viewButton",m.addEventListener("click",(()=>{u.style.display="flex"}));const y=document.createElement("button");p.appendChild(y),y.classList.add("taskButtonsYo"),y.id="removeButton",y.textContent="Remove",y.addEventListener("click",(()=>{let e=n.className.replace(/-/g," ");n.parentElement.removeChild(n);let l=t.findIndex((t=>t.title===e));-1!==l&&(d.splice(l,1),t.splice(l,1),s.splice(l,1)),localStorage.setItem("taskListId",JSON.stringify(s)),localStorage.setItem("taskListClass",JSON.stringify(d)),localStorage.setItem("taskArray",JSON.stringify(t))}))}function a(a){const s=document.querySelector("#taskID").value,d=document.querySelector("#descriptionID").value,i=document.querySelector("#dueDateID").value,o=document.querySelector('input[name="priority"]:checked').value;let c=l(s,d,i,o);n(c,a),t.push(c),localStorage.setItem("taskArray",JSON.stringify(t)),e.style.display="none",e.reset()}let s=[],d=[];!function(){const e=[],l=document.getElementById("sidebar"),i=document.getElementById("projectForm"),o=document.getElementById("projectCancel"),c=document.getElementById("projectSubmit"),r=document.getElementById("taskForm"),u=document.getElementById("taskCancel"),p=document.getElementById("taskSubmit"),m=document.getElementById("projectList");let y=localStorage.getItem("projectArray"),g=JSON.parse(y);if(null!=g)for(let t=0;t<g.length;t++)e.push(g[t]),S();let C=JSON.parse(localStorage.getItem("taskArray")),k=JSON.parse(localStorage.getItem("taskListId")),E=JSON.parse(localStorage.getItem("taskListClass"));if(null!=C)for(let e=0;e<C.length;e++)s.push(k[e]),d.push(E[e]),t.push(C[e]),n(C[e],document.querySelector("."+CSS.escape(E[e])+"#"+CSS.escape(k[e])));function S(){let l=e.slice(-1),n=document.createElement("li");m.appendChild(n);let a=l.toString(),o=a.replace(/\s/g,""),c=document.createElement("div");n.appendChild(c),c.textContent=l,c.id="listedTitle",n.classList.add(o);let u=document.createElement("button");n.appendChild(u),u.id="deleteProject",u.classList.add(o),u.textContent="X",u.addEventListener("click",(()=>{let l=document.getElementsByClassName(o);for(;l[0];)l[0].parentNode.removeChild(l[0]);let n=e.indexOf(a);-1!==n&&e.splice(n,1);for(let l=0;l<t.length;l++){let l=d.indexOf(a);-1!==l&&(d.splice(l,1),t.splice(l,1),s.splice(l,1)),localStorage.setItem("projectArray",JSON.stringify(e)),localStorage.setItem("taskListId",JSON.stringify(s)),localStorage.setItem("taskListClass",JSON.stringify(d)),localStorage.setItem("taskArray",JSON.stringify(t))}}));let p=document.getElementById("projectDisplay"),y=document.createElement("div");p.appendChild(y),y.classList.add(o),y.id="projectDiv",y.style.display="none",function(e){const t=document.createElement("button");t.classList.add("newTaskButtons"),e.appendChild(t),t.textContent="Add task",t.addEventListener("click",(()=>{i.style.display="none",i.reset(),r.style.display="flex",v().style.display="none"}))}(y);let g=document.createElement("div");g.id="taskList",g.classList.add(o),y.appendChild(g),n.addEventListener("click",(()=>{let e=p.children,t=document.querySelectorAll("#deleteProject");for(let l=0;l<e.length;l++)e[l].style.display="none",t[l].style.display="none";let l=n.className,a=document.getElementsByClassName(l);for(let e=0;e<a.length;e++)a[e].style.display="flex";n.style.display="flex"}))}function v(){let e=projectDisplay.children;for(let t=0;t<e.length;t++)if("flex"===e[t].style.display)return document.getElementsByClassName(e[t].className).namedItem("taskList")}(()=>{const e=document.createElement("button");e.id="newProject",e.textContent="New project",l.appendChild(e),e.addEventListener("click",(()=>{r.style.display="none",r.reset(),i.style.display="flex"}))})(),o.addEventListener("click",(()=>{i.style.display="none",i.reset()})),u.addEventListener("click",(()=>{r.style.display="none",r.reset()})),c.addEventListener("click",(function(t){t.preventDefault();let l=document.querySelector("#projectName").value;if(""==l||l.match(/^\s|\s$/))return!1;e.push(l),S(),localStorage.setItem("projectArray",JSON.stringify(e)),i.style.display="none",i.reset()}),!1),p.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector("#taskID").value;if(""==t||t.match(/^\s|\s$/))return!1;{let e=v();a(e),s.push(e.id),d.push(e.className),localStorage.setItem("taskListId",JSON.stringify(s)),localStorage.setItem("taskListClass",JSON.stringify(d)),e.style.display="flex"}}),!1)}()})();